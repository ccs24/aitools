{"version":3,"file":"content_manager.min.js","sources":["../src/content_manager.js"],"sourcesContent":["/* eslint-env es6 */\n/* eslint no-trailing-spaces: \"off\", \n          no-unused-vars: \"off\" */\n/* eslint-disable max-len */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n/**\n * Content manager for ValueMapDoc AI Tools\n */\ndefine(['jquery', 'core/ajax', 'core/notification'], function($, Ajax, Notification) {\n    \n    return {\n        init: function() {\n            this.bindEvents();\n            this.initializeFilters();\n        },\n        \n        bindEvents: function() {\n            // Search functionality\n            $('#content-search').on('input', this.handleSearch.bind(this));\n            \n            // Filter functionality\n            $('#template-filter, #status-filter').on('change', this.handleFilter.bind(this));\n            \n            // Toggle panels\n            $('#search-toggle, #filter-toggle').on('click', function() {\n                $('#search-filter-panel').slideToggle();\n            });\n            \n            // Accordion improvements\n            $('.collapse').on('show.bs.collapse', function() {\n                $(this).prev().find('.fa-chevron-down')\n                    .removeClass('fa-chevron-down')\n                    .addClass('fa-chevron-up');\n            });\n            \n            $('.collapse').on('hide.bs.collapse', function() {\n                $(this).prev().find('.fa-chevron-up')\n                    .removeClass('fa-chevron-up')\n                    .addClass('fa-chevron-down');\n            });\n            \n            // Content item hover effects\n            $('.content-item').hover(\n                function() {\n                    $(this).addClass('shadow-sm').css('transform', 'translateY(-2px)');\n                },\n                function() {\n                    $(this).removeClass('shadow-sm').css('transform', 'translateY(0)');\n                }\n            );\n        },\n        \n        handleSearch: function() {\n            var searchTerm = $('#content-search').val().toLowerCase();\n            \n            $('.content-item').each(function() {\n                var contentText = $(this).text().toLowerCase();\n                var parentColumn = $(this).closest('.col-md-6');\n                \n                if (searchTerm === '' || contentText.includes(searchTerm)) {\n                    parentColumn.show();\n                } else {\n                    parentColumn.hide();\n                }\n            });\n            \n            this.updateActivityVisibility();\n        },\n        \n        handleFilter: function() {\n            var templateFilter = $('#template-filter').val();\n            var statusFilter = $('#status-filter').val();\n            \n            $('.content-item').each(function() {\n                var show = true;\n                var parentColumn = $(this).closest('.col-md-6');\n                \n                if (templateFilter) {\n                    var templateText = $(this).find('.card-text:first').text();\n                    if (!templateText.toLowerCase().includes(templateFilter.toLowerCase())) {\n                        show = false;\n                    }\n                }\n                \n                if (statusFilter) {\n                    var statusBadge = $(this).find('.badge').first();\n                    if (!statusBadge.text().toLowerCase().includes(statusFilter.toLowerCase())) {\n                        show = false;\n                    }\n                }\n                \n                if (show) {\n                    parentColumn.show();\n                } else {\n                    parentColumn.hide();\n                }\n            });\n            \n            this.updateActivityVisibility();\n        },\n        \n        updateActivityVisibility: function() {\n            // Hide activities with no visible content\n            $('.activity-section').each(function() {\n                var visibleContent = $(this).find('.col-md-6:visible').length;\n                if (visibleContent === 0) {\n                    $(this).hide();\n                } else {\n                    $(this).show();\n                }\n            });\n            \n            // Hide courses with no visible activities\n            $('.course-card').each(function() {\n                var visibleActivities = $(this).find('.activity-section:visible').length;\n                if (visibleActivities === 0) {\n                    $(this).hide();\n                    // Also hide from accordion\n                    var courseId = $(this).find('[data-bs-target]').attr('data-bs-target').replace('#collapse-', '');\n                    $('#collapse-' + courseId).removeClass('show');\n                } else {\n                    $(this).show();\n                }\n            });\n        },\n        \n        initializeFilters: function() {\n            // Populate template filter options\n            var templates = new Set();\n            $('.content-item').each(function() {\n                var templateText = $(this).find('.card-text:first').text();\n                var template = templateText.replace('Template: ', '').trim();\n                if (template) {\n                    templates.add(template);\n                }\n            });\n            \n            templates.forEach(function(template) {\n                $('#template-filter').append(\n                    $('<option>').val(template).text(template)\n                );\n            });\n        },\n\n        refreshContent: function() {\n            // AJAX call to refresh content\n            var promises = Ajax.call([{\n                methodname: 'aitoolsub_valuemapdoc_get_user_content_global',\n                args: {}\n            }]);\n            \n            promises[0].done(function(data) {\n                // Update page content\n                console.log(data);\n                location.reload(); // Simple refresh for now\n            }).fail(function(error) {\n                Notification.exception(error);\n            });\n        }\n    };\n});"],"names":["define","$","Ajax","Notification","init","bindEvents","initializeFilters","on","this","handleSearch","bind","handleFilter","slideToggle","prev","find","removeClass","addClass","hover","css","searchTerm","val","toLowerCase","each","contentText","text","parentColumn","closest","includes","show","hide","updateActivityVisibility","templateFilter","statusFilter","first","length","courseId","attr","replace","templates","Set","template","trim","add","forEach","append","refreshContent","call","methodname","args","done","data","console","log","location","reload","fail","error","exception"],"mappings":"AASAA,+CAAO,CAAC,SAAU,YAAa,sBAAsB,SAASC,EAAGC,KAAMC,oBAE5D,CACHC,KAAM,gBACGC,kBACAC,qBAGTD,WAAY,WAERJ,EAAE,mBAAmBM,GAAG,QAASC,KAAKC,aAAaC,KAAKF,OAGxDP,EAAE,oCAAoCM,GAAG,SAAUC,KAAKG,aAAaD,KAAKF,OAG1EP,EAAE,kCAAkCM,GAAG,SAAS,WAC5CN,EAAE,wBAAwBW,iBAI9BX,EAAE,aAAaM,GAAG,oBAAoB,WAClCN,EAAEO,MAAMK,OAAOC,KAAK,oBACfC,YAAY,mBACZC,SAAS,oBAGlBf,EAAE,aAAaM,GAAG,oBAAoB,WAClCN,EAAEO,MAAMK,OAAOC,KAAK,kBACfC,YAAY,iBACZC,SAAS,sBAIlBf,EAAE,iBAAiBgB,OACf,WACIhB,EAAEO,MAAMQ,SAAS,aAAaE,IAAI,YAAa,uBAEnD,WACIjB,EAAEO,MAAMO,YAAY,aAAaG,IAAI,YAAa,qBAK9DT,aAAc,eACNU,WAAalB,EAAE,mBAAmBmB,MAAMC,cAE5CpB,EAAE,iBAAiBqB,MAAK,eAChBC,YAActB,EAAEO,MAAMgB,OAAOH,cAC7BI,aAAexB,EAAEO,MAAMkB,QAAQ,aAEhB,KAAfP,YAAqBI,YAAYI,SAASR,YAC1CM,aAAaG,OAEbH,aAAaI,eAIhBC,4BAGTnB,aAAc,eACNoB,eAAiB9B,EAAE,oBAAoBmB,MACvCY,aAAe/B,EAAE,kBAAkBmB,MAEvCnB,EAAE,iBAAiBqB,MAAK,eAChBM,MAAO,EACPH,aAAexB,EAAEO,MAAMkB,QAAQ,aAE/BK,iBACmB9B,EAAEO,MAAMM,KAAK,oBAAoBU,OAClCH,cAAcM,SAASI,eAAeV,iBACpDO,MAAO,IAIXI,eACkB/B,EAAEO,MAAMM,KAAK,UAAUmB,QACxBT,OAAOH,cAAcM,SAASK,aAAaX,iBACxDO,MAAO,IAIXA,KACAH,aAAaG,OAEbH,aAAaI,eAIhBC,4BAGTA,yBAA0B,WAEtB7B,EAAE,qBAAqBqB,MAAK,WAED,IADFrB,EAAEO,MAAMM,KAAK,qBAAqBoB,OAEnDjC,EAAEO,MAAMqB,OAER5B,EAAEO,MAAMoB,UAKhB3B,EAAE,gBAAgBqB,MAAK,cAEO,IADFrB,EAAEO,MAAMM,KAAK,6BAA6BoB,OACrC,CACzBjC,EAAEO,MAAMqB,WAEJM,SAAWlC,EAAEO,MAAMM,KAAK,oBAAoBsB,KAAK,kBAAkBC,QAAQ,aAAc,IAC7FpC,EAAE,aAAekC,UAAUpB,YAAY,aAEvCd,EAAEO,MAAMoB,WAKpBtB,kBAAmB,eAEXgC,UAAY,IAAIC,IACpBtC,EAAE,iBAAiBqB,MAAK,eAEhBkB,SADevC,EAAEO,MAAMM,KAAK,oBAAoBU,OACxBa,QAAQ,aAAc,IAAII,OAClDD,UACAF,UAAUI,IAAIF,aAItBF,UAAUK,SAAQ,SAASH,UACvBvC,EAAE,oBAAoB2C,OAClB3C,EAAE,YAAYmB,IAAIoB,UAAUhB,KAAKgB,eAK7CK,eAAgB,WAEG3C,KAAK4C,KAAK,CAAC,CACtBC,WAAY,gDACZC,KAAM,MAGD,GAAGC,MAAK,SAASC,MAEtBC,QAAQC,IAAIF,MACZG,SAASC,YACVC,MAAK,SAASC,OACbrD,aAAasD,UAAUD"}