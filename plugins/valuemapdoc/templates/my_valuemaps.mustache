{{!
    My Value Maps Template for AI Tools Subplugin - Simplified without Bootstrap dependencies
}}

<div class="valuemapdoc-valuemaps-dashboard">
    <!-- Header -->
    <div class="valuemaps-header mb-4">
        <div class="row align-items-center">
            <div class="col-md-8">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="{{{back_url}}}">
                                <i class="fa fa-robot"></i> {{#str}}aitools, local_aitools{{/str}}
                            </a>
                        </li>
                        <li class="breadcrumb-item active">{{#str}}my_valuemaps, aitoolsub_valuemapdoc{{/str}}</li>
                    </ol>
                </nav>
                
                <h1 class="h2 mb-2">
                    <i class="fa fa-sitemap text-primary me-2"></i>
                    {{#str}}my_valuemaps_dashboard, aitoolsub_valuemapdoc{{/str}}
                </h1>
                <p class="text-muted mb-0">
                    {{#str}}valuemaps_dashboard_subtitle, aitoolsub_valuemapdoc{{/str}}
                </p>
                
                <!-- Field level info (like in module) -->
                {{#field_level}}
                <div class="field-level-info mt-2">
                    <small class="text-muted">
                        <i class="fa fa-cog me-1"></i>
                        Field Level: <strong>{{level_name}}</strong> ({{fields_count}} fields)
                    </small>
                    
                    <!-- Simple Field Level Form -->
                    <form method="get" class="d-inline-block ms-3">
                        <small class="text-muted me-2">Change to:</small>
                        <select name="field_level" class="form-select form-select-sm d-inline-block" style="width: auto;" onchange="this.form.submit()">
                            <option value="basic" {{#field_level.is_basic}}selected{{/field_level.is_basic}}>Basic (7 fields)</option>
                            <option value="valueproposition" {{#field_level.is_valueproposition}}selected{{/field_level.is_valueproposition}}>Value Proposition (13 fields)</option>
                            <option value="marketing" {{#field_level.is_marketing}}selected{{/field_level.is_marketing}}>Marketing (20 fields)</option>
                        </select>
                    </form>
                </div>
                {{/field_level}}
            </div>
            <div class="col-md-4 text-end">
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-outline-primary" id="refresh-data">
                        <i class="fa fa-refresh"></i> {{#str}}refresh, core{{/str}}
                    </button>
                    <button type="button" class="btn btn-outline-secondary" id="toggle-fullscreen">
                        <i class="fa fa-expand"></i> Fullscreen
                    </button>
                    <button type="button" class="btn btn-outline-info" id="export-data">
                        <i class="fa fa-download"></i> {{#str}}export, aitoolsub_valuemapdoc{{/str}}
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <h3 class="mb-1" id="stat-total-entries">
                        {{#statistics.loading}}<i class="fa fa-spinner fa-spin"></i>{{/statistics.loading}}
                        {{^statistics.loading}}{{statistics.total_entries}}{{/statistics.loading}}
                    </h3>
                    <small>{{#str}}total_entries, aitoolsub_valuemapdoc{{/str}}</small>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-success text-white">
                <div class="card-body text-center">
                    <h3 class="mb-1" id="stat-unique-courses">
                        {{#statistics.loading}}<i class="fa fa-spinner fa-spin"></i>{{/statistics.loading}}
                        {{^statistics.loading}}{{statistics.unique_courses}}{{/statistics.loading}}
                    </h3>
                    <small>{{#str}}courses_with_entries, aitoolsub_valuemapdoc{{/str}}</small>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-info text-white">
                <div class="card-body text-center">
                    <h3 class="mb-1" id="stat-unique-activities">
                        {{#statistics.loading}}<i class="fa fa-spinner fa-spin"></i>{{/statistics.loading}}
                        {{^statistics.loading}}{{statistics.unique_activities}}{{/statistics.loading}}
                    </h3>
                    <small>{{#str}}activities_with_entries, aitoolsub_valuemapdoc{{/str}}</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Info Alert -->
    <div class="alert alert-info mb-4">
        <div class="d-flex align-items-start">
            <i class="fa fa-info-circle fa-lg me-3 mt-1"></i>
            <div>
                <strong>{{#str}}view_only_mode, aitoolsub_valuemapdoc{{/str}}</strong>
                <p class="mb-0 mt-1">
                    {{#str}}view_only_description, aitoolsub_valuemapdoc{{/str}}
                </p>
            </div>
        </div>
    </div>

    <!-- Filters Panel -->
    <div class="card mb-4">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
                <i class="fa fa-filter me-2"></i>
                {{#str}}filter_options, aitoolsub_valuemapdoc{{/str}}
            </h5>
            <div>
                <button type="button" class="btn btn-sm btn-outline-secondary" id="clear-filters">
                    <i class="fa fa-times me-1"></i>
                    {{#str}}clear_filters, aitoolsub_valuemapdoc{{/str}}
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-3">
                    <label class="form-label small">{{#str}}course, core{{/str}}</label>
                    <select class="form-select form-select-sm" id="filter-course">
                        <option value="">{{#str}}all_courses, aitoolsub_valuemapdoc{{/str}}</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label small">{{#str}}activity, core{{/str}}</label>
                    <select class="form-select form-select-sm" id="filter-activity">
                        <option value="">{{#str}}all_activities, aitoolsub_valuemapdoc{{/str}}</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label small">{{#str}}search, core{{/str}}</label>
                    <input type="text" class="form-control form-control-sm" id="search-entries" 
                           placeholder="{{#str}}search_entries_placeholder, aitoolsub_valuemapdoc{{/str}}">
                </div>
            </div>
        </div>
    </div>

    <!-- Main Table Container -->
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
                <i class="fa fa-table me-2"></i>
                {{#str}}value_map_entries, aitoolsub_valuemapdoc{{/str}}
            </h5>
            <div class="table-controls">
                <!-- User filter toggle will be added here by JavaScript -->
            </div>
        </div>
        <div class="card-body p-0">
            <!-- Loading overlay -->
            <div id="loading-overlay">
                <i class="fa fa-spinner fa-spin fa-3x"></i>
                <h5 class="mt-3">{{#str}}loading, core{{/str}}</h5>
                <p class="text-muted">{{#str}}please_wait, aitoolsub_valuemapdoc{{/str}}</p>
            </div>

            <!-- Empty state -->
            <div id="empty-state">
                <i class="fa fa-inbox fa-4x text-muted"></i>
                <h5 class="mt-3">No entries found</h5>
                <p class="text-muted">Start by visiting your courses and using ValueMapDoc activities.</p>
            </div>

            <!-- Error state -->
            <div id="error-state">
                <i class="fa fa-exclamation-triangle fa-3x text-danger"></i>
                <h5 class="mt-3 text-danger">Error Loading Data</h5>
                <p class="text-muted" id="error-message">An error occurred while loading your entries.</p>
                <button type="button" class="btn btn-primary" id="retry-loading">
                    {{#str}}try_again, aitoolsub_valuemapdoc{{/str}}
                </button>
            </div>

            <!-- Main table -->
            <div id="valuemaps-table"></div>
        </div>
    </div>
</div>

<!-- Pass data to JavaScript -->
<script>
window.valuemapsConfig = {
    ajaxUrl: '{{{ajax_url}}}',
    sesskey: '{{sesskey}}',
    userid: {{userid}},
    strings: {
        id: '{{#str}}id, aitoolsub_valuemapdoc{{/str}}',
        course: '{{#str}}course, core{{/str}}',
        activity: '{{#str}}activity, core{{/str}}',
        entry_type: '{{#str}}entry_type, aitoolsub_valuemapdoc{{/str}}',
        preview: '{{#str}}preview, aitoolsub_valuemapdoc{{/str}}',
        created: '{{#str}}created, aitoolsub_valuemapdoc{{/str}}',
        modified: '{{#str}}modified, aitoolsub_valuemapdoc{{/str}}',
        actions: 'Actions',
        view: '{{#str}}view, core{{/str}}',
        edit: '{{#str}}edit, core{{/str}}',
        loading: '{{#str}}loading, core{{/str}}',
        no_data: 'No entries found',
        error: '{{#str}}error, core{{/str}}'
    }
};
</script>